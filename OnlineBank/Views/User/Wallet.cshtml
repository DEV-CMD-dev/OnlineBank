@using OnlineBank.Data.Classes
@using OnlineBank.Data.Entities
@using OnlineBank.Data.Enums
@model WalletViewModel

<link rel="stylesheet" href="~/css/wallet.css" />

@{
    ViewData["Title"] = "Wallet";
}

<main class="main-wallet">
    
    <div class="wallet-container">
        <div class="wallet-header">
            <h2>Wallet</h2>
            <p>Balance overview for <strong>@Model.User.FullName</strong></p>
        </div>

        @if (Model.Cards != null && Model.Cards.Any())
        {
            <div class="cards-list">
                @foreach (var card in Model.Cards)
                {
                    var cardClass = card.CardType switch
                    {
                        CardType.Visa => "card-item card-visa",
                        CardType.MasterCard => "card-item card-mastercard",
                        CardType.Amex => "card-item card-amex",
                        CardType.Maestro => "card-item card-maestro",
                        CardType.UnionPay => "card-item card-unionpay",
                        _ => "card-item card-other"
                    };

                    <div class="@cardClass @(card.IsBlocked ? "blocked" : "")">
                        <img class="card-type-label" src="~/images/cards/@($"{card.CardType.ToString().ToLower()}.png")" alt="@card.CardType" />
                        <p class="card-number">@card.CardNumber</p>
                        <p class="balance"><strong>Balance:</strong> $@card.Balance</p>
                        <p class="expires"><strong>Expires:</strong> @card.ExpirationDate.ToShortDateString()</p>
                        <p class="status">@(card.IsBlocked ? "Blocked" : "Active")</p>
                    </div>
                }
            </div>
        }
        else
        {
            <p>No cards available</p>
        }
    </div>
</main>
<h2>Transactions</h2>
